# -*- coding:utf8 -*-

当前pipeline模块使用串行拓扑序调度
未来，当需要并行异步调用时，

可以使用如下方式：（灌水模式/并行拓扑模式）

灌水模式：
1，检查拓扑性
2，拿出所有起始节点，并派发作业
3，循环体轮询作业情况，当发现某个作业结束：
    3-1，获取它的next list
    3-2，抽取list中，可以马上开始的作业（指前置任务都已经完成的作业）
    3-3，派发新作业
    3-4，直到所有作业完成或中断，结束循环
（这种方式的好处是，在不会丢作业的基础上，前置完成即开始下一个作业，无阻塞）

超级大灌水：（这个方法也不错，本质上不考虑DAG，手上能干啥就干啥，checkDAG保证能一直运行到结束，但需要每个node都是函数式编程的）
1，检查拓扑性
2，建立所有func—list和param-list
3，循环：
    3-1，遍历当前func-list，拿出可以开始的作业（inputs足够），派发作业并从list中删去
    3-2，每当一个作业结束，再如3-1般遍历
    3-3，直到搬空func-list

并行拓扑：
（还没完全调研清楚）

可使用的python pkg由celery，slurm，redis等